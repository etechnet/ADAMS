<HEAD>
<TITLE>ScriptBasic Developers Manual: cft_GetConfigFileName()</TITLE>

<META NAME="description" CONTENT="ScriptBasic Developers Manual: cft_GetConfigFileName()">
<META NAME="keywords" CONTENT="ScriptBasic Developers Manual: cft_GetConfigFileName()">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="t2h.pl">

</HEAD>

<BODY>
<FONT FACE="Verdana" Size="2">

<H1>cft_GetConfigFileName()</H1>
<A HREF="devguide_2.7.1.1.htm">[&lt;&lt;&lt;]</A> <A HREF="devguide_2.7.1.3.htm">[&gt;&gt;&gt;]</A>
<P>

This function tries to locate the configuration file. The working of this function
is system dependant. There are two different implementations: one for UNIX and one for Win32.
<P>
<B>WIN32</B>
<P>
On Win32 systems the function tries to read the system registry. The value of the key given in the argument
<font size="3"><tt>env</tt></font> is used and returned as the config file name. For example if the argument <font size="3"><tt>env</tt></font> is
<font size="3"><tt>Software\myprog\conf</tt></font> then the registry value of the key <font size="3"><tt>HKEY_LOCAL_MACHINE\Software\myprog\conf</tt></font> will
be returned as configuration file name. The program does not check that the file really exists. It only
checks that the registry key exists, it is a string and has some value.
<P>
If the registry key does not exists the program tries to locate the system directory getting the environment
variable <font size="3"><tt>windir</tt></font>, then <font size="3"><tt>systemroot</tt></font> and finally taking <font size="3"><tt>c:\WINDOWS</tt></font>. The argument <font size="3"><tt>DefaultFileName</tt></font> is
appended to the directory name and is returned.
<P>
<B>UNIX</B>
<P>
On UNIX it is more simple. The environment variable <font size="3"><tt>env</tt></font> is used as a file name.
If this does not exists the <font size="3"><tt>DefaultFileName</tt></font> is used and returned.
<P>
<B>BOTH</B>
<P>
The return value of the function is zero if no error has happened. A pointer to the resulting file name
is returned in the variable <font size="3"><tt>ppszConfigFile</tt></font>. The space to hold the resulting file name is allocated
via the allocation function given by the <font size="3"><tt>tConfigTree</tt></font> structure pointed by <font size="3"><tt>pCT</tt></font>.
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
int cft_GetConfigFileName(ptConfigTree pCT,
                          char **ppszConfigFile,
                          char *env,/* environment variable or registry key on win32 */
                          char *DefaultFileName
  )@{
</PRE></FONT>
This function is <font size="3"><tt>static</tt></font> and can not be called from outside of this module.<HR>
<A HREF="devguide_2.7.1.1.htm">[&lt;&lt;&lt;]</A> <A HREF="devguide_2.7.1.3.htm">[&gt;&gt;&gt;]</A>
</FONT>
</BODY>

</HTML>
